# use to enable bash-style completion support
# autoload -U +X compinit && compinit
# autoload -U +X bashcompinit && bashcompinit

function kls {
  GREEN="\033[0;32m"
  RESET="\033[0m"

  kubectl config get-contexts --no-headers \
  | awk -v green="$GREEN" -v reset="$RESET" '{
      if ($1=="*") {
        print green $2 reset
      } else {
        print $1
      }
    }'
}

function ksw {
  if [ -z "$1" ]; then
    # echo "available contexts:"
    kls
    return 1
  fi

  kubectl config use-context "$1"
}

_ksw_complete() {
  compadd $(kubectl config get-contexts -o name)
}

compdef _ksw_complete ksw